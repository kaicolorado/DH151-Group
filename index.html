<!DOCTYPE html>
<html lang="en">
	<head>
		<title>cARTographers: Mapping U.S. Art Education</title>
		<meta charset="utf-8" />

		<!-- style sheets -->
		<link rel="stylesheet" href="css/shared.css" />
		<link rel="stylesheet" href="css/style.css" />

		<!-- leaflet -->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

		<!-- jquery -->
		<script
			src="https://code.jquery.com/jquery-3.6.0.min.js"
			integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
			crossorigin="anonymous"
		></script>

		<!-- papaparse for csv data -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

		<script>
			var expanded = false;
			const expandWidth = "16em";

			function toggleSidebar() {
				if (expanded) {
					closeNav();
				} else {
					openNav();
				}
				expanded = !expanded;
			}

			function openNav() {
				$("#expandable-sidebar").css("margin-right", "0");
				$("#expand-button-div").css("margin-right", expandWidth);
				$("#sidebar-and-content").css("margin-right", expandWidth);
				$("#expand-sidebar-icon").css("transform", "rotate(180deg)"); //* flip icon
			}

			function closeNav() {
				$("#expandable-sidebar").css("margin-right", `-${expandWidth}`);
				$("#expand-button-div").css("margin-right", "0");
				$("#sidebar-and-content").css("margin-right", "0");
				$("#expand-sidebar-icon").css("transform", "rotate(0)"); //* flip icon back
			}
		</script>

		<script>
			$(function () {
				initializeCollapsibles();
			});

			function initializeCollapsibles() {
				var collapsibles = $(".collapsible");

				collapsibles.on("click", function () {
					this.classList.toggle("collapsible-active");
					var icon = $(this).find("#expand-list-icon");
					var content = this.nextElementSibling;

					if (content.style.maxHeight) {
						$(icon).css("transform", "rotate(0deg)");
						content.style.maxHeight = null;
					} else {
						$(icon).css("transform", "rotate(90deg)");
						content.style.maxHeight = content.scrollHeight + "px";
					}
				});
			}
		</script>
	</head>
	<body>
		<div class="header">cARTographers: Mapping U.S. Art Education</div>

		<!-- links to pages -->
		<div class="tabs">
			<a class="tab" href="index.html">Home</a>
			<a class="tab" href="about.html">About</a>
		</div>

		<div id="sidebar-and-content">
			<div id="left-sidebar">
				<div class="sidebar-title"><h3>Welcome!</h3></div>
				<div class="sidebar-content">
					To interact with the map, begin selecting filters.
					<br />
					<br />
					As you select policies, states will be shaded accordingly. Use the legend in the bottom right of the
					map to interpret the shading.
				</div>
			</div>

			<div class="content">
				<div id="map"></div>
			</div>
		</div>

		<div id="expand-button-div">
			<button id="expand-button" onclick="toggleSidebar()">
				<img id="expand-sidebar-icon" alt="expand-sidebar-icon" src="assets/angle-double-left-solid.svg" />
			</button>
		</div>

		<div id="expandable-sidebar">
			<button type="button" class="collapsible">
				Arts Education Policies
				<img id="expand-list-icon" alt="expand-list-icon" src="assets/angle-right-solid.svg" />
			</button>
			<div class="layer-control" id="arts-education-policy-layers"></div>

			<button type="button" class="collapsible">
				Standardized Scores
				<img id="expand-list-icon" alt="expand-list-icon" src="assets/angle-right-solid.svg" />
			</button>
			<div class="layer-control" id="scores-layers"></div>

			<div id="correlation-stats"></div>
		</div>

		<script src="js/csvPaths.js"></script>
		<script src="js/leafletExtensions.js"></script>
		<script src="js/map.js"></script>
	</body>
</html>
